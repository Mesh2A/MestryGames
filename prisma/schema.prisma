generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
}

model GameProfile {
  id        String   @id @default(cuid())
  email     String   @unique
  state     Json
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  purchases Purchase[]
}

model Purchase {
  id             String   @id @default(cuid())
  profileEmail   String
  stripeSessionId String  @unique
  packId         String
  coins          Int
  currency       String
  unitAmount     Int
  status         String
  createdAt      DateTime @default(now())

  profile GameProfile @relation(fields: [profileEmail], references: [email], onDelete: Cascade)

  @@index([profileEmail, createdAt])
}
